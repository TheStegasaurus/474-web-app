<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
     <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    
    <link rel="stylesheet" media="screen" href="css/chartstyle.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> 

    <!-- load the d3.js library -->	
    <script src="http://d3js.org/d3.v4.min.js"></script>

    <title>Course Catalog</title>

  </head>

  <body>

    <div class="container-fluid">
      <h1>Search by Course/Major</h1>
       <div class="row">
        <div class="col-xs-10 col-md-10">
          <div class="input-group">
       <input type="text" class="form-control" placeholder="Search" id="txtSearch"/>
       <div class="input-group-btn">
            <button class="btn btn-primary" type="submit">
            <span class="glyphicon glyphicon-search"></span>
            </button>
       </div>
       </div>
        </div>
      </div>
      <br>
    </div>
    
    <ul class="nav nav-tabs" id="tabs">
      <li role="presentation"><a href="listview.html">List View</a></li>
      <li role="presentation" class="active"><a href="#">Tree View</a></li>
    </ul>


    <br>
    <div class="row">
      <div class="col-xs-12 col-md-7"><h2>MAJOR:</h2><hr>
         <div class="course-list">
            <br>
            <div id="chart" align="center"></div>
        </div>
      </div>        

      <div class="col-xs-1 col-md-1" id="vl"></div>
      <div class="col-xs-6 col-md-4"><h2>CLASS: </h2><hr>
        <br>
        Lorem ipsum dolor sit amet, cu has sonet choro alterum, pro errem iriure id, dolores persequeris usu et. Has munere recusabo id, ut cum zril disputando mediocritatem. Malorum repudiandae ad sea, ei pro movet oportere quaerendum, id tempor commune assentior eos. Ei per scaevola gloriatur voluptatibus. Vix fabulas theophrastus id, his postea officiis ad, veri eligendi gubergren vis in. Sed virtute detracto ei, congue scaevola quo ex, mazim scripserit instructior mel ne. Cum at enim partem, tacimates principes adipiscing id pri.
      </div>
    </div>

  </body>
		
<script>
var data = {
    "name": "CS 139",
    "parent": "null",
    "children": [
      {
        "name": "CS 159",
        "parent": "CS 139",
        "children": [
          {
            "name": "CS 345",
            "parent": "CS 159",
            "children":[
              {
                "name": "CS 474",
                "parent": "CS 345"
              }
            ]
          },
          {
            "name": "CS 240",
            "parent": "CS 159",
            "children":[
              {
                "name": "CS 327",
                "parent": "CS 240"
              },
              {
                "name": "CS 430",
                "parent": "CS 240"
              }
            ]
          },
          {
            "name": "CS 261",
            "parent": "CS 159",
            "children":[
              {
                "name": "CS 482",
                "parent": "CS 261"
              },
              {
                "name": "CS 361",
                "parent": "CS 261",
                "children":[
                  {
                    "name": "CS 432",
                    "parent": "CS 361"
                  },
                  {
                    "name": "CS 450",
                    "parent": "CS 361"
                  },
                  {
                    "name": "CS 470",
                    "parent": "CS 361"
                  }
                ]
              }
            ]
          }
        ]
      },
    ]
};

// Set the dimensions and margins of the diagram
var margin = {top: 40, right: 90, bottom: 50, left: 90},
      w = 660 - margin.left - margin.right,
      h = 500 - margin.top - margin.bottom;

// append the svg object to the body of the page
var svg = d3.select('#chart').append('svg')
  .attr('width', w + margin.left + margin.right)
  .attr('height', h + margin.top + margin.bottom);

// appends a 'group' element to 'svg'
// moves the 'group' element to the top left margin
var g = svg.append('g')
    .attr('transform',
          'translate(' + margin.left + ',' + margin.top + ')');

// declares a tree layout and assigns the size
var tree = d3.tree()
  .size([w, h]);

// Assigns parent
var nodes = d3.hierarchy(data);

 // Assigns the x and y position for the nodes
nodes = tree(nodes);

// adds the links between the nodes
var link = g.selectAll(".link")
    .data(nodes.descendants().slice(1))
    .enter()
    .append("path")
      .attr("class", "link")
      .attr("d", (d) => {
        return "M" + d.x + "," + d.y
          + "C" + d.x + "," + (d.y + d.parent.y) / 2
          + " " + d.parent.x + "," +  (d.y + d.parent.y) / 2
          + " " + d.parent.x + "," + d.parent.y;
      })
      .attr('fill', 'none')
      .attr('stroke', '#ccc')
      .attr('stroke-width', 2);

// adds each node as a group
var node = g.selectAll('.node')
  .data(nodes.descendants())
  .enter()
  .append('g')
    .attr('class', (d) => {
      return "node" +
        (d.children ? " node--internal" : " node--leaf"); })
    .attr("transform", (d) => "translate(" + d.x + "," + d.y + ")" );

// adds the circle to the node
node.append('circle')
  .attr('r', 10)
  .attr('fill', 'black');

// adds the text to the node
node.append("text")
  .attr("dy", ".35em")
  .attr("y", (d) => d.children ? -20 : 20 )
  .style("text-anchor", (d) =>  d.children ? "end" : "start" )
  .text((d) => d.data.name )
  .style("fill-opacity", 1);;


</script>
</html>
